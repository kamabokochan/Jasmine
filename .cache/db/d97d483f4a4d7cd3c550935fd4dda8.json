{"id":"QvaY","dependencies":[{"name":"/Users/caffe/work/Jasmine/package.json","includedInParent":true,"mtime":1579971377170}],"generated":{"js":"class e{constructor(){this.init()}async init(){this.scene=new THREE.Scene,this.clock=new THREE.Clock,this.setLight(),this.setDisplay(),this.setCamera(),this.bindEvent(),this.loader=new THREE.MMDLoader,await this.LoadPMX(),await this.LoadStage(),this.vmd=await this.LoadVMD(),this.helper=new THREE.MMDAnimationHelper,this.helper.add(this.mesh,{animation:this.vmd,physics:!1}),this.helper.objects.get(this.mesh).mixer.existingAction(this.vmd).setLoop(THREE.LoopOnce),this.Render(),document.body.appendChild(this.renderer.domElement)}setLight(){const e=new THREE.AmbientLight(15658734);this.scene.add(e)}setDisplay(){this.renderer=new THREE.WebGLRenderer({alpha:!0}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(window.innerWidth,window.innerHeight),this.renderer.setClearColor(13421772,0)}setCamera(){this.camera=new THREE.PerspectiveCamera(50,window.innerWidth/window.innerHeight,1,1e3),this.camera.position.set(0,10,50);const e=new THREE.OrbitControls(this.camera);e.enableDamping=!0,e.dampingFactor=.2;const i=()=>{e.update(),this.renderer.render(this.scene,this.camera),requestAnimationFrame(i)};i()}bindEvent(){window.addEventListener(\"resize\",()=>this.onWindowResize())}onWindowResize(){this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(window.innerWidth,window.innerHeight),this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix()}LoadPMX(){return new Promise(e=>{this.loader.load(\"./static/pmx/zenitsu/zenitsu_haori.pmx\",i=>{this.mesh=i,this.mesh.position.y=-10,this.scene.add(this.mesh),e(!0)},this.onProgress,this.onError)})}LoadStage(){return new Promise(e=>{this.loader.load(\"./static/pmx/wasitsu/円窓ステージ.pmx\",i=>{i.position.y=-10,this.scene.add(i),e(!0)},this.onProgress,this.onError)})}LoadVMD(){return new Promise(e=>{this.loader.loadAnimation(\"./static/vmd/極楽上半身ボーンが長い用.vmd\",this.mesh,i=>{e(i)},this.onProgress,this.onError)})}onProgress(e){if(e.lengthComputable){const i=e.loaded/e.total*100;console.log(Math.round(i,2)+\"% downloaded\")}}onError(e){console.log(\"ERROR\")}Render(){requestAnimationFrame(()=>this.Render()),this.renderer.clear(),this.renderer.render(this.scene,this.camera),this.helper.update(this.clock.getDelta())}}new e;"},"sourceMaps":{"js":{"mappings":[{"source":"js/index.js","original":{"line":1,"column":0},"generated":{"line":1,"column":0}},{"source":"js/index.js","name":"MMD_SETTING","original":{"line":1,"column":6},"generated":{"line":1,"column":6}},{"source":"js/index.js","name":"constructor","original":{"line":2,"column":2},"generated":{"line":1,"column":8}},{"source":"js/index.js","name":"init","original":{"line":3,"column":9},"generated":{"line":1,"column":22}},{"source":"js/index.js","name":"init","original":{"line":3,"column":9},"generated":{"line":1,"column":27}},{"source":"js/index.js","name":"init","original":{"line":6,"column":8},"generated":{"line":1,"column":34}},{"source":"js/index.js","name":"scene","original":{"line":8,"column":9},"generated":{"line":1,"column":47}},{"source":"js/index.js","name":"scene","original":{"line":8,"column":9},"generated":{"line":1,"column":52}},{"source":"js/index.js","original":{"line":8,"column":17},"generated":{"line":1,"column":58}},{"source":"js/index.js","name":"THREE","original":{"line":8,"column":21},"generated":{"line":1,"column":62}},{"source":"js/index.js","name":"Scene","original":{"line":8,"column":27},"generated":{"line":1,"column":68}},{"source":"js/index.js","name":"clock","original":{"line":9,"column":9},"generated":{"line":1,"column":74}},{"source":"js/index.js","name":"clock","original":{"line":9,"column":9},"generated":{"line":1,"column":79}},{"source":"js/index.js","original":{"line":9,"column":17},"generated":{"line":1,"column":85}},{"source":"js/index.js","name":"THREE","original":{"line":9,"column":21},"generated":{"line":1,"column":89}},{"source":"js/index.js","name":"Clock","original":{"line":9,"column":27},"generated":{"line":1,"column":95}},{"source":"js/index.js","name":"setLight","original":{"line":10,"column":9},"generated":{"line":1,"column":101}},{"source":"js/index.js","name":"setLight","original":{"line":10,"column":9},"generated":{"line":1,"column":106}},{"source":"js/index.js","name":"setDisplay","original":{"line":11,"column":9},"generated":{"line":1,"column":117}},{"source":"js/index.js","name":"setDisplay","original":{"line":11,"column":9},"generated":{"line":1,"column":122}},{"source":"js/index.js","name":"setCamera","original":{"line":12,"column":9},"generated":{"line":1,"column":135}},{"source":"js/index.js","name":"setCamera","original":{"line":12,"column":9},"generated":{"line":1,"column":140}},{"source":"js/index.js","name":"bindEvent","original":{"line":13,"column":9},"generated":{"line":1,"column":152}},{"source":"js/index.js","name":"bindEvent","original":{"line":13,"column":9},"generated":{"line":1,"column":157}},{"source":"js/index.js","name":"loader","original":{"line":14,"column":9},"generated":{"line":1,"column":169}},{"source":"js/index.js","name":"loader","original":{"line":14,"column":9},"generated":{"line":1,"column":174}},{"source":"js/index.js","original":{"line":14,"column":18},"generated":{"line":1,"column":181}},{"source":"js/index.js","name":"THREE","original":{"line":14,"column":22},"generated":{"line":1,"column":185}},{"source":"js/index.js","name":"MMDLoader","original":{"line":14,"column":28},"generated":{"line":1,"column":191}},{"source":"js/index.js","original":{"line":15,"column":10},"generated":{"line":1,"column":207}},{"source":"js/index.js","name":"LoadPMX","original":{"line":15,"column":15},"generated":{"line":1,"column":212}},{"source":"js/index.js","original":{"line":16,"column":10},"generated":{"line":1,"column":228}},{"source":"js/index.js","name":"LoadStage","original":{"line":16,"column":15},"generated":{"line":1,"column":233}},{"source":"js/index.js","name":"vmd","original":{"line":17,"column":9},"generated":{"line":1,"column":245}},{"source":"js/index.js","name":"vmd","original":{"line":17,"column":9},"generated":{"line":1,"column":250}},{"source":"js/index.js","original":{"line":17,"column":21},"generated":{"line":1,"column":260}},{"source":"js/index.js","name":"LoadVMD","original":{"line":17,"column":26},"generated":{"line":1,"column":265}},{"source":"js/index.js","name":"helper","original":{"line":18,"column":9},"generated":{"line":1,"column":275}},{"source":"js/index.js","name":"helper","original":{"line":18,"column":9},"generated":{"line":1,"column":280}},{"source":"js/index.js","original":{"line":18,"column":18},"generated":{"line":1,"column":287}},{"source":"js/index.js","name":"THREE","original":{"line":18,"column":22},"generated":{"line":1,"column":291}},{"source":"js/index.js","name":"MMDAnimationHelper","original":{"line":18,"column":28},"generated":{"line":1,"column":297}},{"source":"js/index.js","name":"helper","original":{"line":20,"column":9},"generated":{"line":1,"column":316}},{"source":"js/index.js","name":"helper","original":{"line":20,"column":9},"generated":{"line":1,"column":321}},{"source":"js/index.js","name":"add","original":{"line":20,"column":16},"generated":{"line":1,"column":328}},{"source":"js/index.js","original":{"line":20,"column":20},"generated":{"line":1,"column":332}},{"source":"js/index.js","name":"mesh","original":{"line":20,"column":25},"generated":{"line":1,"column":337}},{"source":"js/index.js","original":{"line":20,"column":31},"generated":{"line":1,"column":342}},{"source":"js/index.js","name":"animation","original":{"line":21,"column":6},"generated":{"line":1,"column":343}},{"source":"js/index.js","original":{"line":21,"column":17},"generated":{"line":1,"column":353}},{"source":"js/index.js","name":"vmd","original":{"line":21,"column":22},"generated":{"line":1,"column":358}},{"source":"js/index.js","name":"physics","original":{"line":22,"column":6},"generated":{"line":1,"column":362}},{"source":"js/index.js","original":{"line":22,"column":15},"generated":{"line":1,"column":371}},{"source":"js/index.js","original":{"line":25,"column":18},"generated":{"line":1,"column":375}},{"source":"js/index.js","name":"helper","original":{"line":25,"column":23},"generated":{"line":1,"column":380}},{"source":"js/index.js","name":"objects","original":{"line":25,"column":30},"generated":{"line":1,"column":387}},{"source":"js/index.js","name":"get","original":{"line":25,"column":38},"generated":{"line":1,"column":395}},{"source":"js/index.js","original":{"line":25,"column":42},"generated":{"line":1,"column":399}},{"source":"js/index.js","name":"mesh","original":{"line":25,"column":47},"generated":{"line":1,"column":404}},{"source":"js/index.js","name":"mixer","original":{"line":25,"column":53},"generated":{"line":1,"column":410}},{"source":"js/index.js","name":"existingAction","original":{"line":26,"column":10},"generated":{"line":1,"column":416}},{"source":"js/index.js","original":{"line":26,"column":25},"generated":{"line":1,"column":431}},{"source":"js/index.js","name":"vmd","original":{"line":26,"column":30},"generated":{"line":1,"column":436}},{"source":"js/index.js","name":"setLoop","original":{"line":26,"column":35},"generated":{"line":1,"column":441}},{"source":"js/index.js","name":"THREE","original":{"line":26,"column":43},"generated":{"line":1,"column":449}},{"source":"js/index.js","name":"LoopOnce","original":{"line":26,"column":49},"generated":{"line":1,"column":455}},{"source":"js/index.js","name":"Render","original":{"line":37,"column":9},"generated":{"line":1,"column":465}},{"source":"js/index.js","name":"Render","original":{"line":37,"column":9},"generated":{"line":1,"column":470}},{"source":"js/index.js","name":"document","original":{"line":39,"column":4},"generated":{"line":1,"column":479}},{"source":"js/index.js","name":"body","original":{"line":39,"column":13},"generated":{"line":1,"column":488}},{"source":"js/index.js","name":"appendChild","original":{"line":39,"column":18},"generated":{"line":1,"column":493}},{"source":"js/index.js","original":{"line":39,"column":30},"generated":{"line":1,"column":505}},{"source":"js/index.js","name":"renderer","original":{"line":39,"column":35},"generated":{"line":1,"column":510}},{"source":"js/index.js","name":"domElement","original":{"line":39,"column":44},"generated":{"line":1,"column":519}},{"source":"js/index.js","name":"setLight","original":{"line":42,"column":2},"generated":{"line":1,"column":531}},{"source":"js/index.js","name":"ambient","original":{"line":44,"column":10},"generated":{"line":1,"column":542}},{"source":"js/index.js","name":"ambient","original":{"line":44,"column":10},"generated":{"line":1,"column":548}},{"source":"js/index.js","original":{"line":44,"column":20},"generated":{"line":1,"column":550}},{"source":"js/index.js","name":"THREE","original":{"line":44,"column":24},"generated":{"line":1,"column":554}},{"source":"js/index.js","name":"AmbientLight","original":{"line":44,"column":30},"generated":{"line":1,"column":560}},{"source":"js/index.js","original":{"line":44,"column":43},"generated":{"line":1,"column":573}},{"source":"js/index.js","name":"scene","original":{"line":45,"column":9},"generated":{"line":1,"column":583}},{"source":"js/index.js","name":"scene","original":{"line":45,"column":9},"generated":{"line":1,"column":588}},{"source":"js/index.js","name":"add","original":{"line":45,"column":15},"generated":{"line":1,"column":594}},{"source":"js/index.js","name":"ambient","original":{"line":45,"column":19},"generated":{"line":1,"column":598}},{"source":"js/index.js","name":"setDisplay","original":{"line":48,"column":2},"generated":{"line":1,"column":601}},{"source":"js/index.js","name":"renderer","original":{"line":50,"column":9},"generated":{"line":1,"column":614}},{"source":"js/index.js","name":"renderer","original":{"line":50,"column":9},"generated":{"line":1,"column":619}},{"source":"js/index.js","original":{"line":50,"column":20},"generated":{"line":1,"column":628}},{"source":"js/index.js","name":"THREE","original":{"line":50,"column":24},"generated":{"line":1,"column":632}},{"source":"js/index.js","name":"WebGLRenderer","original":{"line":50,"column":30},"generated":{"line":1,"column":638}},{"source":"js/index.js","original":{"line":50,"column":44},"generated":{"line":1,"column":652}},{"source":"js/index.js","name":"alpha","original":{"line":50,"column":46},"generated":{"line":1,"column":653}},{"source":"js/index.js","original":{"line":50,"column":53},"generated":{"line":1,"column":660}},{"source":"js/index.js","name":"renderer","original":{"line":51,"column":9},"generated":{"line":1,"column":664}},{"source":"js/index.js","name":"renderer","original":{"line":51,"column":9},"generated":{"line":1,"column":669}},{"source":"js/index.js","name":"setPixelRatio","original":{"line":51,"column":18},"generated":{"line":1,"column":678}},{"source":"js/index.js","name":"window","original":{"line":51,"column":32},"generated":{"line":1,"column":692}},{"source":"js/index.js","name":"devicePixelRatio","original":{"line":51,"column":39},"generated":{"line":1,"column":699}},{"source":"js/index.js","name":"renderer","original":{"line":52,"column":9},"generated":{"line":1,"column":717}},{"source":"js/index.js","name":"renderer","original":{"line":52,"column":9},"generated":{"line":1,"column":722}},{"source":"js/index.js","name":"setSize","original":{"line":52,"column":18},"generated":{"line":1,"column":731}},{"source":"js/index.js","name":"window","original":{"line":52,"column":26},"generated":{"line":1,"column":739}},{"source":"js/index.js","name":"innerWidth","original":{"line":52,"column":33},"generated":{"line":1,"column":746}},{"source":"js/index.js","name":"window","original":{"line":52,"column":45},"generated":{"line":1,"column":757}},{"source":"js/index.js","name":"innerHeight","original":{"line":52,"column":52},"generated":{"line":1,"column":764}},{"source":"js/index.js","name":"renderer","original":{"line":53,"column":9},"generated":{"line":1,"column":777}},{"source":"js/index.js","name":"renderer","original":{"line":53,"column":9},"generated":{"line":1,"column":782}},{"source":"js/index.js","name":"setClearColor","original":{"line":53,"column":18},"generated":{"line":1,"column":791}},{"source":"js/index.js","original":{"line":53,"column":32},"generated":{"line":1,"column":805}},{"source":"js/index.js","original":{"line":53,"column":42},"generated":{"line":1,"column":814}},{"source":"js/index.js","name":"setCamera","original":{"line":56,"column":2},"generated":{"line":1,"column":817}},{"source":"js/index.js","name":"camera","original":{"line":58,"column":9},"generated":{"line":1,"column":829}},{"source":"js/index.js","name":"camera","original":{"line":58,"column":9},"generated":{"line":1,"column":834}},{"source":"js/index.js","original":{"line":58,"column":18},"generated":{"line":1,"column":841}},{"source":"js/index.js","name":"THREE","original":{"line":58,"column":22},"generated":{"line":1,"column":845}},{"source":"js/index.js","name":"PerspectiveCamera","original":{"line":58,"column":28},"generated":{"line":1,"column":851}},{"source":"js/index.js","original":{"line":58,"column":46},"generated":{"line":1,"column":869}},{"source":"js/index.js","name":"window","original":{"line":58,"column":50},"generated":{"line":1,"column":872}},{"source":"js/index.js","name":"innerWidth","original":{"line":58,"column":57},"generated":{"line":1,"column":879}},{"source":"js/index.js","name":"window","original":{"line":58,"column":70},"generated":{"line":1,"column":890}},{"source":"js/index.js","name":"innerHeight","original":{"line":58,"column":77},"generated":{"line":1,"column":897}},{"source":"js/index.js","original":{"line":58,"column":90},"generated":{"line":1,"column":909}},{"source":"js/index.js","original":{"line":58,"column":93},"generated":{"line":1,"column":911}},{"source":"js/index.js","name":"camera","original":{"line":59,"column":9},"generated":{"line":1,"column":916}},{"source":"js/index.js","name":"camera","original":{"line":59,"column":9},"generated":{"line":1,"column":921}},{"source":"js/index.js","name":"position","original":{"line":59,"column":16},"generated":{"line":1,"column":928}},{"source":"js/index.js","name":"set","original":{"line":59,"column":25},"generated":{"line":1,"column":937}},{"source":"js/index.js","original":{"line":59,"column":29},"generated":{"line":1,"column":941}},{"source":"js/index.js","original":{"line":59,"column":32},"generated":{"line":1,"column":943}},{"source":"js/index.js","original":{"line":59,"column":36},"generated":{"line":1,"column":946}},{"source":"js/index.js","name":"controls","original":{"line":62,"column":10},"generated":{"line":1,"column":950}},{"source":"js/index.js","name":"controls","original":{"line":62,"column":10},"generated":{"line":1,"column":956}},{"source":"js/index.js","original":{"line":62,"column":21},"generated":{"line":1,"column":958}},{"source":"js/index.js","name":"THREE","original":{"line":62,"column":25},"generated":{"line":1,"column":962}},{"source":"js/index.js","name":"OrbitControls","original":{"line":62,"column":31},"generated":{"line":1,"column":968}},{"source":"js/index.js","original":{"line":62,"column":45},"generated":{"line":1,"column":982}},{"source":"js/index.js","name":"camera","original":{"line":62,"column":50},"generated":{"line":1,"column":987}},{"source":"js/index.js","name":"controls","original":{"line":65,"column":4},"generated":{"line":1,"column":995}},{"source":"js/index.js","name":"enableDamping","original":{"line":65,"column":13},"generated":{"line":1,"column":997}},{"source":"js/index.js","original":{"line":65,"column":29},"generated":{"line":1,"column":1012}},{"source":"js/index.js","name":"controls","original":{"line":66,"column":4},"generated":{"line":1,"column":1014}},{"source":"js/index.js","name":"dampingFactor","original":{"line":66,"column":13},"generated":{"line":1,"column":1016}},{"source":"js/index.js","original":{"line":66,"column":29},"generated":{"line":1,"column":1030}},{"source":"js/index.js","name":"tick","original":{"line":69,"column":10},"generated":{"line":1,"column":1033}},{"source":"js/index.js","name":"tick","original":{"line":69,"column":10},"generated":{"line":1,"column":1039}},{"source":"js/index.js","original":{"line":69,"column":17},"generated":{"line":1,"column":1041}},{"source":"js/index.js","name":"controls","original":{"line":71,"column":6},"generated":{"line":1,"column":1046}},{"source":"js/index.js","name":"update","original":{"line":71,"column":15},"generated":{"line":1,"column":1048}},{"source":"js/index.js","name":"renderer","original":{"line":74,"column":11},"generated":{"line":1,"column":1057}},{"source":"js/index.js","name":"renderer","original":{"line":74,"column":11},"generated":{"line":1,"column":1062}},{"source":"js/index.js","name":"render","original":{"line":74,"column":20},"generated":{"line":1,"column":1071}},{"source":"js/index.js","original":{"line":74,"column":27},"generated":{"line":1,"column":1078}},{"source":"js/index.js","name":"scene","original":{"line":74,"column":32},"generated":{"line":1,"column":1083}},{"source":"js/index.js","original":{"line":74,"column":39},"generated":{"line":1,"column":1089}},{"source":"js/index.js","name":"camera","original":{"line":74,"column":44},"generated":{"line":1,"column":1094}},{"source":"js/index.js","name":"requestAnimationFrame","original":{"line":76,"column":6},"generated":{"line":1,"column":1102}},{"source":"js/index.js","name":"tick","original":{"line":76,"column":28},"generated":{"line":1,"column":1124}},{"source":"js/index.js","name":"tick","original":{"line":79,"column":4},"generated":{"line":1,"column":1128}},{"source":"js/index.js","name":"bindEvent","original":{"line":82,"column":2},"generated":{"line":1,"column":1132}},{"source":"js/index.js","name":"window","original":{"line":83,"column":4},"generated":{"line":1,"column":1144}},{"source":"js/index.js","name":"addEventListener","original":{"line":83,"column":11},"generated":{"line":1,"column":1151}},{"source":"js/index.js","original":{"line":83,"column":28},"generated":{"line":1,"column":1168}},{"source":"js/index.js","original":{"line":83,"column":38},"generated":{"line":1,"column":1177}},{"source":"js/index.js","original":{"line":83,"column":44},"generated":{"line":1,"column":1181}},{"source":"js/index.js","name":"onWindowResize","original":{"line":83,"column":49},"generated":{"line":1,"column":1186}},{"source":"js/index.js","name":"onWindowResize","original":{"line":86,"column":2},"generated":{"line":1,"column":1204}},{"source":"js/index.js","name":"renderer","original":{"line":89,"column":9},"generated":{"line":1,"column":1221}},{"source":"js/index.js","name":"renderer","original":{"line":89,"column":9},"generated":{"line":1,"column":1226}},{"source":"js/index.js","name":"setPixelRatio","original":{"line":89,"column":18},"generated":{"line":1,"column":1235}},{"source":"js/index.js","name":"window","original":{"line":89,"column":32},"generated":{"line":1,"column":1249}},{"source":"js/index.js","name":"devicePixelRatio","original":{"line":89,"column":39},"generated":{"line":1,"column":1256}},{"source":"js/index.js","name":"renderer","original":{"line":90,"column":9},"generated":{"line":1,"column":1274}},{"source":"js/index.js","name":"renderer","original":{"line":90,"column":9},"generated":{"line":1,"column":1279}},{"source":"js/index.js","name":"setSize","original":{"line":90,"column":18},"generated":{"line":1,"column":1288}},{"source":"js/index.js","name":"window","original":{"line":90,"column":26},"generated":{"line":1,"column":1296}},{"source":"js/index.js","name":"innerWidth","original":{"line":90,"column":33},"generated":{"line":1,"column":1303}},{"source":"js/index.js","name":"window","original":{"line":90,"column":45},"generated":{"line":1,"column":1314}},{"source":"js/index.js","name":"innerHeight","original":{"line":90,"column":52},"generated":{"line":1,"column":1321}},{"source":"js/index.js","name":"camera","original":{"line":92,"column":9},"generated":{"line":1,"column":1334}},{"source":"js/index.js","name":"camera","original":{"line":92,"column":9},"generated":{"line":1,"column":1339}},{"source":"js/index.js","name":"aspect","original":{"line":92,"column":16},"generated":{"line":1,"column":1346}},{"source":"js/index.js","name":"window","original":{"line":92,"column":25},"generated":{"line":1,"column":1353}},{"source":"js/index.js","name":"innerWidth","original":{"line":92,"column":32},"generated":{"line":1,"column":1360}},{"source":"js/index.js","name":"window","original":{"line":92,"column":45},"generated":{"line":1,"column":1371}},{"source":"js/index.js","name":"innerHeight","original":{"line":92,"column":52},"generated":{"line":1,"column":1378}},{"source":"js/index.js","name":"camera","original":{"line":93,"column":9},"generated":{"line":1,"column":1390}},{"source":"js/index.js","name":"camera","original":{"line":93,"column":9},"generated":{"line":1,"column":1395}},{"source":"js/index.js","name":"updateProjectionMatrix","original":{"line":93,"column":16},"generated":{"line":1,"column":1402}},{"source":"js/index.js","name":"LoadPMX","original":{"line":96,"column":2},"generated":{"line":1,"column":1427}},{"source":"js/index.js","original":{"line":109,"column":11},"generated":{"line":1,"column":1437}},{"source":"js/index.js","original":{"line":109,"column":11},"generated":{"line":1,"column":1444}},{"source":"js/index.js","name":"Promise","original":{"line":109,"column":15},"generated":{"line":1,"column":1448}},{"source":"js/index.js","name":"resolve","original":{"line":109,"column":23},"generated":{"line":1,"column":1456}},{"source":"js/index.js","name":"loader","original":{"line":110,"column":11},"generated":{"line":1,"column":1460}},{"source":"js/index.js","name":"loader","original":{"line":110,"column":11},"generated":{"line":1,"column":1465}},{"source":"js/index.js","name":"load","original":{"line":110,"column":18},"generated":{"line":1,"column":1472}},{"source":"js/index.js","original":{"line":103,"column":14},"generated":{"line":1,"column":1477}},{"source":"js/index.js","name":"object","original":{"line":110,"column":35},"generated":{"line":1,"column":1518}},{"source":"js/index.js","name":"mesh","original":{"line":111,"column":13},"generated":{"line":1,"column":1522}},{"source":"js/index.js","name":"mesh","original":{"line":111,"column":13},"generated":{"line":1,"column":1527}},{"source":"js/index.js","name":"object","original":{"line":111,"column":20},"generated":{"line":1,"column":1532}},{"source":"js/index.js","name":"mesh","original":{"line":112,"column":13},"generated":{"line":1,"column":1534}},{"source":"js/index.js","name":"mesh","original":{"line":112,"column":13},"generated":{"line":1,"column":1539}},{"source":"js/index.js","name":"position","original":{"line":112,"column":18},"generated":{"line":1,"column":1544}},{"source":"js/index.js","name":"y","original":{"line":112,"column":27},"generated":{"line":1,"column":1553}},{"source":"js/index.js","original":{"line":112,"column":32},"generated":{"line":1,"column":1556}},{"source":"js/index.js","name":"scene","original":{"line":113,"column":13},"generated":{"line":1,"column":1559}},{"source":"js/index.js","name":"scene","original":{"line":113,"column":13},"generated":{"line":1,"column":1564}},{"source":"js/index.js","name":"add","original":{"line":113,"column":19},"generated":{"line":1,"column":1570}},{"source":"js/index.js","original":{"line":113,"column":23},"generated":{"line":1,"column":1574}},{"source":"js/index.js","name":"mesh","original":{"line":113,"column":28},"generated":{"line":1,"column":1579}},{"source":"js/index.js","name":"resolve","original":{"line":114,"column":8},"generated":{"line":1,"column":1585}},{"source":"js/index.js","original":{"line":114,"column":16},"generated":{"line":1,"column":1588}},{"source":"js/index.js","original":{"line":115,"column":9},"generated":{"line":1,"column":1592}},{"source":"js/index.js","name":"onProgress","original":{"line":115,"column":14},"generated":{"line":1,"column":1597}},{"source":"js/index.js","original":{"line":115,"column":26},"generated":{"line":1,"column":1608}},{"source":"js/index.js","name":"onError","original":{"line":115,"column":31},"generated":{"line":1,"column":1613}},{"source":"js/index.js","name":"LoadStage","original":{"line":119,"column":2},"generated":{"line":1,"column":1624}},{"source":"js/index.js","original":{"line":122,"column":11},"generated":{"line":1,"column":1636}},{"source":"js/index.js","original":{"line":122,"column":11},"generated":{"line":1,"column":1643}},{"source":"js/index.js","name":"Promise","original":{"line":122,"column":15},"generated":{"line":1,"column":1647}},{"source":"js/index.js","name":"resolve","original":{"line":122,"column":23},"generated":{"line":1,"column":1655}},{"source":"js/index.js","name":"loader","original":{"line":123,"column":11},"generated":{"line":1,"column":1659}},{"source":"js/index.js","name":"loader","original":{"line":123,"column":11},"generated":{"line":1,"column":1664}},{"source":"js/index.js","name":"load","original":{"line":123,"column":18},"generated":{"line":1,"column":1671}},{"source":"js/index.js","original":{"line":120,"column":18},"generated":{"line":1,"column":1676}},{"source":"js/index.js","name":"object","original":{"line":123,"column":31},"generated":{"line":1,"column":1710}},{"source":"js/index.js","name":"object","original":{"line":124,"column":8},"generated":{"line":1,"column":1714}},{"source":"js/index.js","name":"position","original":{"line":124,"column":15},"generated":{"line":1,"column":1716}},{"source":"js/index.js","name":"y","original":{"line":124,"column":24},"generated":{"line":1,"column":1725}},{"source":"js/index.js","original":{"line":124,"column":29},"generated":{"line":1,"column":1728}},{"source":"js/index.js","name":"scene","original":{"line":125,"column":13},"generated":{"line":1,"column":1731}},{"source":"js/index.js","name":"scene","original":{"line":125,"column":13},"generated":{"line":1,"column":1736}},{"source":"js/index.js","name":"add","original":{"line":125,"column":19},"generated":{"line":1,"column":1742}},{"source":"js/index.js","name":"object","original":{"line":125,"column":23},"generated":{"line":1,"column":1746}},{"source":"js/index.js","name":"resolve","original":{"line":126,"column":8},"generated":{"line":1,"column":1749}},{"source":"js/index.js","original":{"line":126,"column":16},"generated":{"line":1,"column":1752}},{"source":"js/index.js","original":{"line":127,"column":9},"generated":{"line":1,"column":1756}},{"source":"js/index.js","name":"onProgress","original":{"line":127,"column":14},"generated":{"line":1,"column":1761}},{"source":"js/index.js","original":{"line":127,"column":26},"generated":{"line":1,"column":1772}},{"source":"js/index.js","name":"onError","original":{"line":127,"column":31},"generated":{"line":1,"column":1777}},{"source":"js/index.js","name":"LoadVMD","original":{"line":131,"column":2},"generated":{"line":1,"column":1788}},{"source":"js/index.js","original":{"line":134,"column":11},"generated":{"line":1,"column":1798}},{"source":"js/index.js","original":{"line":134,"column":11},"generated":{"line":1,"column":1805}},{"source":"js/index.js","name":"Promise","original":{"line":134,"column":15},"generated":{"line":1,"column":1809}},{"source":"js/index.js","name":"resolve","original":{"line":134,"column":23},"generated":{"line":1,"column":1817}},{"source":"js/index.js","name":"loader","original":{"line":135,"column":11},"generated":{"line":1,"column":1821}},{"source":"js/index.js","name":"loader","original":{"line":135,"column":11},"generated":{"line":1,"column":1826}},{"source":"js/index.js","name":"loadAnimation","original":{"line":135,"column":18},"generated":{"line":1,"column":1833}},{"source":"js/index.js","original":{"line":132,"column":17},"generated":{"line":1,"column":1847}},{"source":"js/index.js","original":{"line":135,"column":38},"generated":{"line":1,"column":1879}},{"source":"js/index.js","name":"mesh","original":{"line":135,"column":43},"generated":{"line":1,"column":1884}},{"source":"js/index.js","name":"vmd","original":{"line":135,"column":50},"generated":{"line":1,"column":1889}},{"source":"js/index.js","name":"resolve","original":{"line":136,"column":8},"generated":{"line":1,"column":1893}},{"source":"js/index.js","name":"vmd","original":{"line":136,"column":16},"generated":{"line":1,"column":1895}},{"source":"js/index.js","original":{"line":137,"column":9},"generated":{"line":1,"column":1899}},{"source":"js/index.js","name":"onProgress","original":{"line":137,"column":14},"generated":{"line":1,"column":1904}},{"source":"js/index.js","original":{"line":137,"column":26},"generated":{"line":1,"column":1915}},{"source":"js/index.js","name":"onError","original":{"line":137,"column":31},"generated":{"line":1,"column":1920}},{"source":"js/index.js","name":"onProgress","original":{"line":141,"column":2},"generated":{"line":1,"column":1931}},{"source":"js/index.js","name":"xhr","original":{"line":141,"column":13},"generated":{"line":1,"column":1942}},{"source":"js/index.js","name":"xhr","original":{"line":142,"column":8},"generated":{"line":1,"column":1945}},{"source":"js/index.js","name":"xhr","original":{"line":142,"column":8},"generated":{"line":1,"column":1948}},{"source":"js/index.js","name":"lengthComputable","original":{"line":142,"column":12},"generated":{"line":1,"column":1950}},{"source":"js/index.js","original":{"line":142,"column":30},"generated":{"line":1,"column":1967}},{"source":"js/index.js","name":"percentComplete","original":{"line":143,"column":12},"generated":{"line":1,"column":1968}},{"source":"js/index.js","name":"percentComplete","original":{"line":143,"column":12},"generated":{"line":1,"column":1974}},{"source":"js/index.js","name":"xhr","original":{"line":143,"column":30},"generated":{"line":1,"column":1976}},{"source":"js/index.js","name":"loaded","original":{"line":143,"column":34},"generated":{"line":1,"column":1978}},{"source":"js/index.js","name":"xhr","original":{"line":143,"column":43},"generated":{"line":1,"column":1985}},{"source":"js/index.js","name":"total","original":{"line":143,"column":47},"generated":{"line":1,"column":1987}},{"source":"js/index.js","original":{"line":143,"column":55},"generated":{"line":1,"column":1993}},{"source":"js/index.js","name":"console","original":{"line":144,"column":6},"generated":{"line":1,"column":1997}},{"source":"js/index.js","name":"log","original":{"line":144,"column":14},"generated":{"line":1,"column":2005}},{"source":"js/index.js","name":"Math","original":{"line":144,"column":18},"generated":{"line":1,"column":2009}},{"source":"js/index.js","name":"round","original":{"line":144,"column":23},"generated":{"line":1,"column":2014}},{"source":"js/index.js","name":"percentComplete","original":{"line":144,"column":29},"generated":{"line":1,"column":2020}},{"source":"js/index.js","original":{"line":144,"column":46},"generated":{"line":1,"column":2022}},{"source":"js/index.js","original":{"line":144,"column":51},"generated":{"line":1,"column":2025}},{"source":"js/index.js","name":"onError","original":{"line":148,"column":2},"generated":{"line":1,"column":2042}},{"source":"js/index.js","name":"xhr","original":{"line":148,"column":10},"generated":{"line":1,"column":2050}},{"source":"js/index.js","name":"console","original":{"line":149,"column":4},"generated":{"line":1,"column":2053}},{"source":"js/index.js","name":"log","original":{"line":149,"column":12},"generated":{"line":1,"column":2061}},{"source":"js/index.js","original":{"line":149,"column":16},"generated":{"line":1,"column":2065}},{"source":"js/index.js","name":"Render","original":{"line":152,"column":2},"generated":{"line":1,"column":2074}},{"source":"js/index.js","name":"requestAnimationFrame","original":{"line":153,"column":4},"generated":{"line":1,"column":2083}},{"source":"js/index.js","original":{"line":153,"column":26},"generated":{"line":1,"column":2105}},{"source":"js/index.js","original":{"line":153,"column":32},"generated":{"line":1,"column":2109}},{"source":"js/index.js","name":"Render","original":{"line":153,"column":37},"generated":{"line":1,"column":2114}},{"source":"js/index.js","name":"renderer","original":{"line":154,"column":9},"generated":{"line":1,"column":2124}},{"source":"js/index.js","name":"renderer","original":{"line":154,"column":9},"generated":{"line":1,"column":2129}},{"source":"js/index.js","name":"clear","original":{"line":154,"column":18},"generated":{"line":1,"column":2138}},{"source":"js/index.js","name":"renderer","original":{"line":155,"column":9},"generated":{"line":1,"column":2146}},{"source":"js/index.js","name":"renderer","original":{"line":155,"column":9},"generated":{"line":1,"column":2151}},{"source":"js/index.js","name":"render","original":{"line":155,"column":18},"generated":{"line":1,"column":2160}},{"source":"js/index.js","original":{"line":155,"column":25},"generated":{"line":1,"column":2167}},{"source":"js/index.js","name":"scene","original":{"line":155,"column":30},"generated":{"line":1,"column":2172}},{"source":"js/index.js","original":{"line":155,"column":37},"generated":{"line":1,"column":2178}},{"source":"js/index.js","name":"camera","original":{"line":155,"column":42},"generated":{"line":1,"column":2183}},{"source":"js/index.js","name":"helper","original":{"line":156,"column":9},"generated":{"line":1,"column":2191}},{"source":"js/index.js","name":"helper","original":{"line":156,"column":9},"generated":{"line":1,"column":2196}},{"source":"js/index.js","name":"update","original":{"line":156,"column":16},"generated":{"line":1,"column":2203}},{"source":"js/index.js","original":{"line":156,"column":23},"generated":{"line":1,"column":2210}},{"source":"js/index.js","name":"clock","original":{"line":156,"column":28},"generated":{"line":1,"column":2215}},{"source":"js/index.js","name":"getDelta","original":{"line":156,"column":34},"generated":{"line":1,"column":2221}},{"source":"js/index.js","original":{"line":160,"column":0},"generated":{"line":1,"column":2234}},{"source":"js/index.js","name":"MMD_SETTING","original":{"line":160,"column":4},"generated":{"line":1,"column":2238}}],"sources":{"js/index.js":"class MMD_SETTING {\n  constructor() {\n    this.init();\n  }\n\n  async init() {\n    // シーンの作成\n    this.scene = new THREE.Scene();\n    this.clock = new THREE.Clock();\n    this.setLight();\n    this.setDisplay();\n    this.setCamera();\n    this.bindEvent();\n    this.loader = new THREE.MMDLoader();\n    await this.LoadPMX();\n    await this.LoadStage();\n    this.vmd = await this.LoadVMD();\n    this.helper = new THREE.MMDAnimationHelper();\n\n    this.helper.add(this.mesh, {\n      animation: this.vmd,\n      physics: false\n    });\n\n    const mixer = this.helper.objects.get(this.mesh).mixer;\n    mixer.existingAction(this.vmd).setLoop(THREE.LoopOnce);\n\n    // // VMD Loop Event\n    // mixer.addEventListener(\"loop\", (event) => {\n    //   console.log(\"loop\");\n    // });\n\n    // // VMD Loop Once Event\n    // mixer.addEventListener(\"finished\", (event) => {\n    //   console.log(\"finished\");\n    // });\n    this.Render();\n    // documentにMMDをセットする\n    document.body.appendChild(this.renderer.domElement);\n  }\n\n  setLight() {\n    // 光の作成\n    const ambient = new THREE.AmbientLight(0xeeeeee);\n    this.scene.add(ambient);\n  }\n\n  setDisplay() {\n    // 画面表示の設定\n    this.renderer = new THREE.WebGLRenderer({ alpha: true });\n    this.renderer.setPixelRatio(window.devicePixelRatio);\n    this.renderer.setSize(window.innerWidth, window.innerHeight);\n    this.renderer.setClearColor(0xcccccc, 0);\n  }\n\n  setCamera() {\n    // カメラを作成 (視野角, 画面のアスペクト比, カメラに映る最短距離, カメラに映る最遠距離)\n    this.camera = new THREE.PerspectiveCamera(50, window.innerWidth / window.innerHeight, 1, 1000);\n    this.camera.position.set(0, 10, 50);\n\n    // カメラコントローラーを作成\n    const controls = new THREE.OrbitControls(this.camera);\n\n    // 滑らかにカメラコントローラーを制御する\n    controls.enableDamping = true;\n    controls.dampingFactor = 0.2;\n\n    // 毎フレーム時に実行されるループイベントです\n    const tick = () => {\n      // カメラコントローラーを更新\n      controls.update();\n\n      // レンダリング\n      this.renderer.render(this.scene, this.camera);\n\n      requestAnimationFrame(tick);\n    }\n\n    tick();\n  }\n\n  bindEvent() {\n    window.addEventListener('resize', () => this.onWindowResize());\n  }\n\n  onWindowResize() {\n    // https://ics.media/tutorial-three/renderer_resize/\n    // レンダラーのサイズを調整する\n    this.renderer.setPixelRatio(window.devicePixelRatio);\n    this.renderer.setSize(window.innerWidth, window.innerHeight);\n    // カメラのアスペクト比を正す\n    this.camera.aspect = window.innerWidth / window.innerHeight;\n    this.camera.updateProjectionMatrix();\n  }\n\n  LoadPMX() {\n    // モデルとモーションの読み込み準備\n    const models = [\n      {\n        path: \"./static/pmx/zenitsu/zenitsu_taifuku.pmx\"\n      },\n      {\n        path: \"./static/pmx/zenitsu/zenitsu_haori.pmx\"\n      }\n    ]\n\n    var modelFile = models[1].path;\n\n    return new Promise(resolve => {\n      this.loader.load(modelFile, (object) => {\n        this.mesh = object;\n        this.mesh.position.y = -10;\n        this.scene.add(this.mesh);\n        resolve(true);\n      }, this.onProgress, this.onError);\n    });\n  }\n\n  LoadStage() {\n    const stage = './static/pmx/wasitsu/円窓ステージ.pmx';\n\n    return new Promise(resolve => {\n      this.loader.load(stage, (object) => {\n        object.position.y = -10;\n        this.scene.add(object);\n        resolve(true);\n      }, this.onProgress, this.onError);\n    });\n  }\n\n  LoadVMD() {\n    const path = './static/vmd/極楽上半身ボーンが長い用.vmd';\n\n    return new Promise(resolve => {\n      this.loader.loadAnimation(path, this.mesh, (vmd) => {\n        resolve(vmd);\n      }, this.onProgress, this.onError);\n    })\n  }\n\n  onProgress(xhr) {\n    if (xhr.lengthComputable) {\n      const percentComplete = xhr.loaded / xhr.total * 100;\n      console.log(Math.round(percentComplete, 2) + '% downloaded');\n    }\n  }\n\n  onError(xhr) {\n    console.log(\"ERROR\");\n  }\n\n  Render() {\n    requestAnimationFrame(() => this.Render());\n    this.renderer.clear();\n    this.renderer.render(this.scene, this.camera);\n    this.helper.update(this.clock.getDelta());\n  }\n}\n\nnew MMD_SETTING();"},"lineCount":null}},"error":null,"hash":"4edd7294d3979e271ee3c3a7c63959b0","cacheData":{"env":{}}}